### 堆叠注入

话不多说，直接上题（BUUCTF）

![](https://pic1.imgdb.cn/item/682af51d58cb8da5c8fc1af7.jpg)

正常输入

![](https://pic1.imgdb.cn/item/682af53158cb8da5c8fc1b86.jpg)

爆破测 fuzz

![](https://pic1.imgdb.cn/item/682af54258cb8da5c8fc1b94.jpg)

发现 `;` 没有过滤，可以堆叠注入

![](https://pic1.imgdb.cn/item/682af55d58cb8da5c8fc1cc1.jpg)

成功爆出数据库

```sql
11;show database;
```

![](https://pic1.imgdb.cn/item/682af58358cb8da5c8fc1d1e.jpg)

输入字符则没有回显推测后端使用了 `||`

在 SQL 中 `||` 用于连接字符，但这里应该是将 `||` 当作了运算符而不是连接符

![](https://pic1.imgdb.cn/item/682af8bc58cb8da5c8fc26b6.jpg)

![](https://pic1.imgdb.cn/item/682af69058cb8da5c8fc2165.jpg)

插入数字没事，但如果是不存在的字符则报错

![](https://pic1.imgdb.cn/item/682af90358cb8da5c8fc2721.jpg)

所以思路就是用数字找 flag，同时修改配置将 || 当作连接符

```sql
1;set sql_mode=PIPES_AS_CONCAT;select 1
```

![](https://pic1.imgdb.cn/item/682af99058cb8da5c8fc27ca.jpg)